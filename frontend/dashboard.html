<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
        body {
            height: 100vh;
            padding: 10px;
            background-image: linear-gradient(to left, #74ebd5, #ACB6E5);
        }

        .dashboard-container {
            background: whitesmoke;
            min-height: 30vh;
            padding: 20px 50px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        input {
            margin-bottom: 10px;
        }



        button {
            background-color: #4ca0af;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        
    </style>
</head>

<body>
    <div class="dashboard-container">
        <h2>Dashboard</h2>

        <h3>Upload File</h3>

        <form id="uploadForm">
            <input type="file" id="fileInput" accept=".jpg,.jpeg,.png,.pdf" required>
            <button type="submit">Upload</button>
            <button type="button" onclick="clearList()">Clear All</button>
        </form>

        <h3>Uploaded Files</h3>
        <div id="fileList"></div>



        <!-- <form id="uploadForm" enctype="multipart/form-data">
            <input type="file" id="file" name="file" accept=".pdf,.png,.jpeg,.jpg" required>
            <button type="submit">Upload</button>
        </form> -->


        <button type="submit"><a href="/login.html" style="color: #fff;">Logout</a></button>
    </div>

    <script>
    // Load stored files on page load
    window.onload = displayFiles;

    // Handle form submit
    document.getElementById("uploadForm").addEventListener("submit", function(e) {
      e.preventDefault(); // prevent actual form submission
      uploadFile();
    });

    function uploadFile() {
      const fileInput = document.getElementById("fileInput");
      const file = fileInput.files[0];
      if (!file) return alert("Please select a file");

      const reader = new FileReader();
      reader.onload = function(e) {
        // Get stored files or empty array
        let files = JSON.parse(localStorage.getItem("files")) || [];
        
        // Store file data in Base64
        files.push({
          id: Date.now(),
          name: file.name,
          type: file.type,
          data: e.target.result
        });

        localStorage.setItem("files", JSON.stringify(files));
        displayFiles();
        fileInput.value = ""; // reset file input
      };

      reader.readAsDataURL(file); // Convert file to Base64
    }

    function displayFiles() {
      const fileList = document.getElementById("fileList");
      fileList.innerHTML = "";
      const files = JSON.parse(localStorage.getItem("files")) || [];

      files.forEach(file => {
        const div = document.createElement("div");
        div.className = "file-item";

        let filePreview = "";
        if (file.type === "application/pdf") {
          filePreview = `<iframe src="${file.data}" width="150" height="100"></iframe>`;
        }

        div.innerHTML = `
          <span class="file-name"  style="margin-right:10px">${file.name}</span>
          ${filePreview}
          <a href="${file.data}"  style="margin-right:10px" download="${file.name}">Download</a>
          <button class="bin-btn" onclick="deleteFile(${file.id})">üóëÔ∏è</button>
        `;
        fileList.appendChild(div);
      });
    }

    function deleteFile(fileId) {
      let files = JSON.parse(localStorage.getItem("files")) || [];
      files = files.filter(f => f.id !== fileId);
      localStorage.setItem("files", JSON.stringify(files));
      displayFiles();
    }

    function clearList() {
      localStorage.removeItem("files");
      displayFiles();
    }
    </script>
</body>

</html>
